import{r as p,j as e,l as P,T as c,d as v,a_ as I,bk as U,a$ as k,P as s}from"./index-e2557835.js";import{U as z}from"./TagsInput-6b6695f6.js";import{G as h}from"./Grid-f905a886.js";import{a as $}from"./numeral-d348d23e.js";const F=({label:N,name:l,onChange:o,errors:m,cloudinaryLink:a,isEdit:w})=>{const[r,u]=p.useState([]),[x,g]=p.useState(null),[f,j]=p.useState(!1);p.useEffect(()=>{a!=null&&a.length&&u(a)},[a,w]);const B=t=>{g(t),j(!0)},y=()=>{g(null),j(!1)},C=t=>{const{files:i}=t.target,b=Array.from(i).map(d=>({filetype:d.type.includes("image")?"image":"pdf",url:URL.createObjectURL(d),name:d.name,size:d.size})),n=[...r,...b];u(n),o&&o(n)},R=t=>{const i=r.filter((b,n)=>n!==t);u(i),o&&o(i)};return e.jsx("div",{className:"pt-4 dark:text-white",children:e.jsxs(P,{component:"form",elevation:3,variant:"outlined",sx:{display:"flex",flexDirection:"column",padding:"20px"},children:[e.jsxs(h,{container:!0,spacing:2,style:{height:"300px",overflow:"auto"},children:[e.jsx(h,{item:!0,xs:r.length>0?6:12,children:e.jsxs($,{htmlFor:`${l}-upload`,children:[e.jsx("div",{className:"cursor-pointer p-4 w-full border border-dashed flex justify-center items-center",children:e.jsx(z,{width:"70%",height:"0%"})}),e.jsx(c,{className:"text-center sticky",variant:"body1",children:"Click or drag files to this area to upload (Images/PDFs)"})]})}),e.jsx(h,{item:!0,xs:r.length>0?6:12,children:r.length>0?r.map((t,i)=>e.jsxs("div",{style:{marginBottom:"10px"},children:[e.jsxs("div",{style:{display:"flex",alignItems:"center"},children:[t.filetype==="image"?e.jsx("div",{children:e.jsx("img",{src:t.url,alt:t.name||`File ${i}`,style:{maxWidth:"100px",maxHeight:"100px",width:"auto",height:"auto",cursor:"pointer"},onClick:()=>B(t)})}):t.filetype==="pdf"&&e.jsx("iframe",{title:`PDF Preview ${i}`,src:t.url,style:{width:"100px",height:"100px"}}),e.jsx(c,{variant:"subtitle2",gutterBottom:!0,style:{marginLeft:"10px",flexGrow:1},children:t.name||"Uploaded File"}),e.jsx(v,{onClick:()=>R(i),color:"error",children:"❌"})]}),e.jsxs(c,{variant:"body1",gutterBottom:!0,children:["Size: ",t.size?(t.size/1024).toFixed(2):"N/A"," KB"]})]},i)):e.jsx(c,{variant:"body1",gutterBottom:!0,children:"No files uploaded yet."})})]}),e.jsx("input",{accept:"image/*, application/pdf",id:`${l}-upload`,type:"file",name:l,style:{display:"none"},onChange:C,multiple:!0}),m&&m[l]&&e.jsx("p",{children:m[l].message}),e.jsx(I,{"aria-labelledby":"transition-modal-title","aria-describedby":"transition-modal-description",open:f,onClose:y,closeAfterTransition:!0,BackdropComponent:U,BackdropProps:{timeout:500},children:e.jsx(k,{in:f,children:e.jsxs("div",{style:{position:"relative",maxWidth:"80%",maxHeight:"80%",margin:"auto",display:"flex",alignItems:"center",justifyContent:"center",flexDirection:"column",backgroundColor:"#fff",padding:"20px",borderRadius:"8px",overflowY:"auto"},children:[x&&x.url?e.jsx("img",{src:x.url,alt:"cloud",style:{maxWidth:"100%",maxHeight:"100%",marginBottom:"10px"}}):null,e.jsx(v,{onClick:y,style:{position:"absolute",top:"10px",right:"10px"},children:"❌"})]})})})]})})};F.propTypes={label:s.string.isRequired,isEdit:s.bool,name:s.string.isRequired,onChange:s.func,errors:s.object,cloudinaryLink:s.arrayOf(s.shape({filetype:s.string.isRequired,url:s.string.isRequired,name:s.string,size:s.number}))};const D=F;export{D as M};
