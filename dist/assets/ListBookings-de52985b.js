import{o as Y,aL as z,aM as J,r as h,j as t,S as X,W as Z}from"./index-e2557835.js";import{N as $}from"./NavIconsDualtonned-629598de.js";import{C as Q}from"./CustomBreadCrumps-190c0dc2.js";import{u as W}from"./user-80ca6d81.js";import{g as w,U as ee,b as A,N as te,T as oe,e as ae,c as ie}from"./table-empty-rows-f7edc550.js";import{I as ne}from"./ItemLoading-b7fbf24b.js";import{M as se}from"./MutipleDeleteModal-b0e950f4.js";import{h as le}from"./CustomModalMessages-21d53744.js";import{a as re,U as ce}from"./booking-create-27ca57cf.js";import{C as de}from"./Container-19e483a1.js";import{C as me}from"./Card-6c6ce8af.js";import{T as ue,a as pe}from"./TabList-9dd0e885.js";import{T as S}from"./TagsInput-6b6695f6.js";import{T as ge,a as he,b as be,c as fe}from"./TablePagination-7c4eea28.js";import"./Breadcrumbs-e71b08a1.js";import"./TableRow-cd1bf836.js";import"./index-1f53deeb.js";import"./KeyboardArrowRight-ffd3b3e1.js";import"./Select-c64a9698.js";import"./CircularProgress-63df29d4.js";import"./numeral-d348d23e.js";import"./EditId-3a4900d9.js";import"./label-e738403c.js";import"./FormatChnager-3630efc0.js";import"./dayjs.min-6085eb1e.js";import"./Grid-f905a886.js";import"./index.esm-ebced901.js";import"./yup-08e917aa.js";import"./CustomGrid-a5eaf6b9.js";import"./CustomSubmitButton-a5ee7712.js";import"./CustomContainerGrid-0fd00d96.js";import"./Mutations-d3a4afe0.js";import"./Queries-1edd9701.js";import"./CardHeader-5fec4234.js";import"./Mutations-3f3892ef.js";import"./AdapterDayjs-fefbe935.js";import"./Chip-7b8997d7.js";import"./LastPage-e1be4f83.js";function De(){var F;const i=Y(),j=z();console.log(i);const D=J();console.log(D);const[p,T]=h.useState(0),[k,N]=h.useState("asc"),[d,v]=h.useState([]),[x,R]=h.useState("name"),[b,L]=h.useState(""),[C,U]=h.useState(25),[r,f]=h.useState("all"),G=(e,o)=>{switch(o){case"1":f("all");break;case"2":f("upcoming");break;case"3":f("ongoing");break;case"4":f("ungenratedInvoices");break;case"5":f("completed");break;default:f("all")}},M=e=>{const s=(()=>{const a=new Date,c=a.getFullYear(),n=a.getMonth(),l=a.getDate(),m=a.getHours(),g=a.getMinutes(),P=a.getSeconds();return new Date(c,n,l,m,g,P)})();switch(r){case"upcoming":const a=e.filter(n=>u(n.fromDate)>s);return a.sort((n,l)=>{const m=u(n.fromDate),g=u(l.fromDate);return m-g}),a;case"ongoing":return e.filter(n=>{const l=u(n.fromDate),m=u(n.toDate);return l<=s&&m>=s});case"completed":return e.filter(n=>u(n.toDate)<s);case"ungenratedInvoices":return D.data;case"all":const c=[...e];return c.sort((n,l)=>{const m=u(n.fromDate);return u(l.fromDate)-m}),c;default:return e}},u=e=>{const o=e.split(" "),s=o[0],a=o[1]+" "+o[2],c=s.split("-"),n=parseInt(c[0]),l=parseInt(c[1])-1,m=parseInt(c[2]),g=a.split(":");let P=parseInt(g[0]);const V=parseInt(g[1]);return o[2]==="PM"&&P!==12&&(P+=12),new Date(m,l,n,P,V)},B=(e,o)=>{o!==""&&(N(x===o&&k==="asc"?"desc":"asc"),R(o))},y=e=>{var o;if(e.target.checked){let s;d.length===((o=i==null?void 0:i.data)==null?void 0:o.length)?v([]):(i.isSuccess?s=i.data.map(a=>a._id):s=[],v(s))}else v([])},K=(e,o)=>{const s=d.indexOf(o);let a=[];s===-1?a=[...d,o]:a=d.filter(c=>c!==o),v(a)},O=(e,o)=>{T(o)},E=e=>{T(0),U(parseInt(e.target.value,10))},_=e=>{console.log(e.target.value),T(0),L(e.target.value)};console.log(b);const I=re({inputData:i.isSuccess?i.data:[],comparator:w(k,x),filterName:b}),q=!I.length&&!!b,H=e=>{se(()=>j.mutate(e),le,e),v([])};return t.jsx(de,{children:t.jsxs(me,{children:[t.jsx(ee,{selected:d,filterName:b,onDelete:H,onFilterName:_}),t.jsx(ue,{value:r,children:t.jsxs(pe,{onChange:G,"aria-label":"lab API tabs example",children:[t.jsx(S,{label:"All",value:"1",sx:{backgroundColor:r==="all"?"#59c5b9":""}}),t.jsx(S,{label:"Upcoming",value:"2",sx:{backgroundColor:r==="upcoming"?"#59c5b9":""}}),t.jsx(S,{label:"Ongoing",value:"3",sx:{backgroundColor:r==="ongoing"?"#59c5b9":""}}),t.jsx(S,{label:"Ungenrated Invoices",value:"4",sx:{backgroundColor:r==="ungenratedInvoices"?"#59c5b9":""}}),t.jsx(S,{label:"Completed",value:"5",sx:{backgroundColor:r==="completed"?"#59c5b9":""}})]})}),t.jsx(X,{children:t.jsx(ge,{sx:{overflow:"unset"},children:t.jsxs(he,{sx:{minWidth:800},children:[r==="completed"?t.jsx(A,{order:k,orderBy:x,rowCount:W.length,numSelected:d.length,onRequestSort:B,onSelectAllClick:y,headLabel:[{id:"bookingDate",label:"Booking Date",minWidth:150},{id:"tripdetails",label:"Kms before trip",minWidth:200},{id:"tripdils",label:"Kms After trip",minWidth:200},{id:"invoice",label:"Generate invoice",minWidth:150},{id:"userdetails",label:"Customer Details",minWidth:150},{id:"location",label:"Car details",minWidth:150},{id:"pickup",label:"Pickup Point",minWidth:150},{id:"drop",label:"Delivery Point",minWidth:150},{id:"amt",label:"Amount",minWidth:150},{id:"status",label:"Status",minWidth:150},{id:""}]}):t.jsx(t.Fragment,{children:r==="ungenratedInvoices"?t.jsx(A,{order:k,orderBy:x,rowCount:W.length,numSelected:d.length,onRequestSort:B,onSelectAllClick:y,headLabel:[{id:"invoice",label:"Generate invoice",minWidth:150},{id:"bookingate",label:"Booking Date",minWidth:150},{id:"userdetails",label:"Customer Details",minWidth:150},{id:"location",label:"Car details",minWidth:150},{id:"pickup",label:"Pickup Point",minWidth:150},{id:"drop",label:"Delivery Point",minWidth:150},{id:"amt",label:"Amount",minWidth:150},{id:"status",label:"Status",minWidth:150},{id:""}]}):t.jsx(A,{order:k,orderBy:x,rowCount:W.length,numSelected:d.length,onRequestSort:B,onSelectAllClick:y,headLabel:[{id:"bookingDate",label:"Booking Date",minWidth:150},{id:"userdetails",label:"Customer Details",minWidth:150},{id:"location",label:"Car details",minWidth:150},{id:"drop",label:"Delivery Point",minWidth:150},{id:"pickup",label:"Pickup Point",minWidth:150},{id:"amt",label:"Amount",minWidth:150},{id:"status",label:"Status",minWidth:150},{id:""}]})}),i.isLoading?t.jsx(ne,{}):t.jsxs(be,{children:[M(I).length===0&&!b?t.jsx(te,{er1:"No bookings Found",er2:"Create new Bookings to populate over here"}):M(I).slice(p*C,p*C+C).map(e=>t.jsx(ce,{filterOption:r,id:e._id,payment:e.payment,costAfterMinimumKm:e.costAfterMinimumKm,minimumKilometer:e.minimumKilometer,pickupCost:e.pickupCost,deliveryCost:e.deliveryCost,driver:e.driver,costPerDay:e.costPerDay,employee:e.employee,advancePaid:e.advancePaid,invoiceGenerated:e.invoiceGenerated,advanceAmount:e.advanceAmount,invoiceId:e.invoiceId,fromDate:e.fromDate,formdata:e.driver,toDate:e.toDate,kmBeforeTrip:e.kmBeforeTrip,discount:e.discount,tax:e.tax,totalDuration:e.totalDuration,pickupPoint:e.pickupPoint,dropPoint:e.dropPoint,carSelected:e.carSelected,customerSelected:e.customerSelected,subTotals:e.subTotals,isKilometreUpdated:e.isKilometreUpdated,total:e.total,status:e.status,invoiceDetails:e.invoiceDetails,selected:d.includes(e._id),handleClick:o=>K(o,e._id)},e._id)),t.jsx(oe,{height:77,emptyRows:ae(p,C,W.length)}),q&&t.jsx(ie,{query:b})]})]})})}),t.jsx(fe,{page:p,component:"div",count:(F=i==null?void 0:i.data)==null?void 0:F.length,rowsPerPage:C,onPageChange:O,rowsPerPageOptions:[5,10,25],onRowsPerPageChange:E})]})})}function at(){var j,D,p;const i=$();return t.jsxs(t.Fragment,{children:[t.jsx(Z,{children:t.jsx("title",{children:" Bookings | U-DRIVE"})}),t.jsx(Q,{headText:"Bookings list",icon1:(j=i[2])==null?void 0:j.icon,icon2:(p=(D=i[2])==null?void 0:D.submenu[1])==null?void 0:p.icon,subname1:"Booking",subname2:"List Booking",redirectlink:"/booking/create",buttonName:"Booking create",redirectIcon:"eva:plus-fill"}),t.jsx(De,{})]})}export{at as default};
