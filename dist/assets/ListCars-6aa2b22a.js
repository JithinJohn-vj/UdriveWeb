import{v as U,aF as H,r as b,z,C as w,aG as J,aH as X,aI as Y,j as i,W as Z}from"./index-e2557835.js";import{N as $}from"./NavIconsDualtonned-629598de.js";import{C as Q}from"./CustomBreadCrumps-190c0dc2.js";import{u as h}from"./user-80ca6d81.js";import{b as ee}from"./Mutations-d3a4afe0.js";import{a as ie,g as ae,U as te,b as g,N as le,T as ne,e as se,c as oe}from"./table-empty-rows-f7edc550.js";import{I as re}from"./ItemLoading-b7fbf24b.js";import{M as ce}from"./MutipleDeleteModal-b0e950f4.js";import{e as de}from"./CustomModalMessages-21d53744.js";import{a as ue}from"./cars-create-0a15d6d4.js";import{C as me}from"./Container-19e483a1.js";import{C as be}from"./Card-6c6ce8af.js";import{T as he,a as pe}from"./TabList-9dd0e885.js";import{T as S}from"./TagsInput-6b6695f6.js";import{T as ve,a as Ce,b as ge,c as Se}from"./TablePagination-7c4eea28.js";import"./Breadcrumbs-e71b08a1.js";import"./TableRow-cd1bf836.js";import"./index-1f53deeb.js";import"./KeyboardArrowRight-ffd3b3e1.js";import"./Select-c64a9698.js";import"./CircularProgress-63df29d4.js";import"./numeral-d348d23e.js";import"./EditId-3a4900d9.js";import"./FormatChnager-3630efc0.js";import"./dayjs.min-6085eb1e.js";import"./Services-823bb078.js";import"./Grid-f905a886.js";import"./index.esm-ebced901.js";import"./yup-08e917aa.js";import"./CustomGrid-a5eaf6b9.js";import"./RHFAvtarUpload-e3dcd148.js";import"./RHFMultiFileUpload-006d2ba5.js";import"./CustomSubmitButton-a5ee7712.js";import"./AdapterDayjs-fefbe935.js";import"./Chip-7b8997d7.js";import"./LastPage-e1be4f83.js";function xe(){var L;const t=U(),d=H(),W=ee();console.log(t);const[u,k]=b.useState(0),[o,F]=b.useState("asc"),[n,x]=b.useState([]),[r,R]=b.useState("name"),[p,O]=b.useState(""),[f,B]=b.useState(25),[l,m]=b.useState("all"),j=z(),N=w();J();const T=X(),P=Y();console.log(d);const V=(e,a)=>{switch(a){case"1":m("all");break;case"2":m("onrun");break;case"3":m("onyard");break;case"4":m("insurancedue");break;case"5":m("servicedue");break;case"6":m("pollutiondue");break;default:m("all")}},I=e=>{switch(l){case"onrun":return(N==null?void 0:N.data)||[];case"onyard":return(j==null?void 0:j.data)||[];case"insurancedue":return(T==null?void 0:T.data)||[];case"servicedue":return(P==null?void 0:P.data)||[];case"pollutiondue":return(d==null?void 0:d.data)||[];default:return e}},v=(e,a)=>{a!==""&&(F(r===a&&o==="asc"?"desc":"asc"),R(a))},C=e=>{var a;if(e.target.checked){let s;n.length===((a=t==null?void 0:t.data)==null?void 0:a.length)?x([]):(t.isSuccess?s=t.data.map(c=>c._id):s=[],x(s))}else x([])},A=(e,a)=>{const s=n.indexOf(a);let c=[];s===-1?c=[...n,a]:c=n.filter(D=>D!==a),x(c)},M=(e,a)=>{k(a)},G=e=>{k(0),B(parseInt(e.target.value,10))},q=e=>{console.log(e.target.value),k(0),O(e.target.value)};console.log(p);const y=ie({inputData:t.isSuccess?t.data:[],comparator:ae(o,r),filterName:p}),K=!y.length&&!!p,_=e=>{console.log("Deleting items:",e),ce(()=>W.mutate(e),de,e),x([])};return i.jsx(me,{children:i.jsxs(be,{children:[i.jsx(te,{selected:n,filterName:p,onDelete:_,onFilterName:q}),i.jsx(he,{value:l,children:i.jsxs(pe,{onChange:V,"aria-label":"lab API tabs example",children:[i.jsx(S,{label:"All",value:"1",sx:{backgroundColor:l==="all"?"#59c5b9":""}}),i.jsx(S,{label:"On run",value:"2",sx:{backgroundColor:l==="onrun"?"#59c5b9":""}}),i.jsx(S,{label:"On yard",value:"3",sx:{backgroundColor:l==="onyard"?"#59c5b9":""}}),i.jsx(S,{label:"Insurance Due",value:"4",sx:{backgroundColor:l==="insurancedue"?"#59c5b9":""}}),i.jsx(S,{label:"Service Due",value:"5",sx:{backgroundColor:l==="servicedue"?"#59c5b9":""}}),i.jsx(S,{label:"Pollution Due",value:"6",sx:{backgroundColor:l==="pollutiondue"?"#59c5b9":""}})]})}),i.jsx(ve,{children:i.jsxs(Ce,{children:[l==="all"?i.jsx(g,{order:o,orderBy:r,rowCount:h.length,numSelected:n.length,onRequestSort:v,onSelectAllClick:C,headLabel:[{id:"name",label:"Name",minWidth:150},{id:"VehicleNumber",label:"Vehicle Number",minWidth:150},{id:"transmission",label:"Transmission",minWidth:150},{id:"kmscovered",label:"Kilometers Covered",minWidth:180},{id:"serviceInterval",label:"Service Interval",minWidth:150},{id:"timesBooked",label:"Times Booked",minWidth:150},{id:"lastServiceOn",label:"Last Service",minWidth:150},{id:"insuranceDueDate",label:"Insurance Due",minWidth:150},{id:"pollutionDue",label:"Pollution Due",minWidth:150},{id:""}]}):l==="onrun"?i.jsx(g,{order:o,orderBy:r,rowCount:h.length,numSelected:n.length,onRequestSort:v,onSelectAllClick:C,headLabel:[{id:"name",label:"Name",minWidth:150},{id:"VehicleNumber",label:"Vehicle Number",minWidth:150},{id:"transmission",label:"Transmission",minWidth:150},{id:"bookedFrom",label:"Booked From",minWidth:150},{id:"bookedTill",label:"Booked Till",minWidth:150},{id:"lastServiceOn",label:"Last Service",minWidth:150},{id:"insuranceDueDate",label:"Insurance Due",minWidth:150},{id:"pollution",label:"Pollution Due",minWidth:150},{id:""}]}):i.jsx(i.Fragment,{children:l==="onyard"&&i.jsx(g,{order:o,orderBy:r,rowCount:h.length,numSelected:n.length,onRequestSort:v,onSelectAllClick:C,headLabel:[{id:"name",label:"Name",minWidth:150},{id:"VehicleNumber",label:"Vehicle Number",minWidth:150},{id:"transmission",label:"Transmission",minWidth:150},{id:"timesBooked",label:"Times Booked",minWidth:150},{id:"lastServiceOn",label:"Last Service",minWidth:150},{id:"insuranceDueDate",label:"Insurance Due",minWidth:150},{id:"pollutionDue",label:"Pollution Due",minWidth:150},{id:""}]})}),l==="insurancedue"&&i.jsx(g,{order:o,orderBy:r,rowCount:h.length,numSelected:n.length,onRequestSort:v,onSelectAllClick:C,headLabel:[{id:"name",label:"Name",minWidth:150},{id:"VehicleNumber",label:"Vehicle Number",minWidth:150},{id:"transmission",label:"Transmission",minWidth:150},{id:"serviceInterval",label:"last Service",minWidth:150},{id:"insuranceDueDate",label:"Insurance Due",minWidth:150},{id:"insuranceTimeLeft",label:"Time left to expire",minWidth:150},{id:""}]}),l==="servicedue"&&i.jsx(g,{order:o,orderBy:r,rowCount:h.length,numSelected:n.length,onRequestSort:v,onSelectAllClick:C,headLabel:[{id:"name",label:"Name",minWidth:150},{id:"VehicleNumber",label:"Vehicle Number",minWidth:150},{id:"serviceInterval",label:"Service interval",minWidth:150},{id:"insuranceDueDate",label:"KMS ran after service",minWidth:150},{id:"kmService",label:"KMS left for service",minWidth:150},{id:"serviceDone",label:"",minWidth:150},{id:""}]}),l==="pollutiondue"&&i.jsx(g,{order:o,orderBy:r,rowCount:h.length,numSelected:n.length,onRequestSort:v,onSelectAllClick:C,headLabel:[{id:"name",label:"Name",minWidth:150},{id:"VehicleNumber",label:"Vehicle Number",minWidth:150},{id:"transmission",label:"Transmission",minWidth:150},{id:"lastServiceOn",label:"Last Service",minWidth:150},{id:"insuranceDueDate",label:"Insurance Due",minWidth:150},{id:"pollutionDue",label:"Pollution Due",minWidth:150},{id:"daysleft",label:"Days Left",minWidth:150},{id:""}]}),t.isLoading?i.jsx(re,{}):i.jsxs(ge,{children:[I(y.length)===0&&!p?i.jsx(le,{er1:"No Cars Found",er2:"Create new Cars to populate over here"}):I(y).slice(u*f,u*f+f).map(e=>{var a,s,c,D;return i.jsx(ue,{id:e._id,filterOption:l,name:e.name,insurancePolicy:(a=e.insurancePolicy)==null?void 0:a.url,pollutionCertificate:(s=e.pollutionCertificate)==null?void 0:s.url,pollution:e.pollution,rcBook:(c=e.rcBook)==null?void 0:c.url,totalKmCovered:e.totalKmCovered,vehicleNumber:e.vehicleNumber,bookings:e.bookings,company:e.manufacturingCompany,year:e.yearOfManufacturing,serviceKilometre:e.serviceKilometre,fuel:e.fuelType,transmission:e.transmission,insurance:e.insurance,lastService:e.lastService,carImage:(D=e.carImage)==null?void 0:D.url,service_interval:e.serviceInterval,selected:n.includes(e._id),handleClick:E=>A(E,e._id)},e._id)}),i.jsx(ne,{height:77,emptyRows:se(u,f,h.length)}),K&&i.jsx(oe,{query:p})]})]})}),i.jsx(Se,{page:u,component:"div",count:(L=t==null?void 0:t.data)==null?void 0:L.length,rowsPerPage:f,onPageChange:M,rowsPerPageOptions:[5,10,25],onRowsPerPageChange:G})]})})}function ti(){var d,W,u;const t=$();return i.jsxs(i.Fragment,{children:[i.jsx(Z,{children:i.jsx("title",{children:" Cars | U-DRIVE"})}),i.jsx(Q,{headText:"Cars list",icon1:(d=t[3])==null?void 0:d.icon,icon2:(u=(W=t[2])==null?void 0:W.submenu[1])==null?void 0:u.icon,subname1:"Cars",subname2:"List Cars",redirectlink:"/cars/create",buttonName:"Cars create",redirectIcon:"eva:plus-fill"}),i.jsx(xe,{})]})}export{ti as default};
