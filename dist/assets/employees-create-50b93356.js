import{aB as X,r as E,j as e,d as D,I as R,A as H,T as t,B as ae,b as $,P as r,aC as le,u as re,a as ne,a9 as ce,a7 as F,aD as A,aE as ie}from"./index-e2557835.js";import{E as ee}from"./EditId-3a4900d9.js";import{g as oe,a as de,b as xe,c as me,d as pe,e as he,f as ue}from"./Mutations-138a202e.js";import{L as je}from"./label-e738403c.js";import{f as ge,C as Z,u as be,b as ve,c as Ne}from"./CustomModalMessages-21d53744.js";import{N as fe}from"./NavIconsDualtonned-629598de.js";import{D as ye,C as Y}from"./FormatChnager-3630efc0.js";import{C as se}from"./Container-19e483a1.js";import{D as we,a as ke}from"./dayjs.min-6085eb1e.js";import{G as n}from"./Grid-f905a886.js";import{C as _}from"./Card-6c6ce8af.js";import{T as Se,a as S}from"./TableRow-cd1bf836.js";import{C as Ce}from"./KeyboardArrowRight-ffd3b3e1.js";import{c as Re,a as K,d as Ee}from"./index.esm-ebced901.js";import{u as qe,d as Ie,e as Me,R as J,c as Be,f as Te}from"./TagsInput-6b6695f6.js";import{o as Fe}from"./yup-08e917aa.js";import{C}from"./CustomGrid-a5eaf6b9.js";import{A as Ae}from"./RHFAvtarUpload-e3dcd148.js";import{C as Pe}from"./CustomSubmitButton-a5ee7712.js";import{C as Ue}from"./CustomContainerGrid-0fd00d96.js";function is(){return X({queryKey:["getEmployees"],queryFn:()=>oe()})}function ze(d){return X({queryKey:["getEmployees",d],queryFn:c=>de(c)})}function We(d){return X({queryKey:["getEmployees",d],queryFn:c=>xe(c)})}function te({open:d,onClose:c,userDetails:a}){var v,w,q,I;const j=fe();console.log(a);const[i,y]=E.useState(Array(a.bookings.length).fill(!1)),g=s=>{const l=[...i];l[s]=!l[s],y(l)},x=We(a==null?void 0:a.id);return console.log(x),e.jsx(se,{children:e.jsxs(we,{maxWidth:"lg",fullWidth:!0,open:d,onClose:c,children:[e.jsx(ye,{className:"bg-[#59c5b9] text-white  rounded",children:"Employee Detailed view"}),e.jsx(D,{"aria-label":"close",onClick:c,sx:{position:"absolute",right:10,top:5,color:"white"},children:e.jsx(R,{icon:"fa:close",width:"96",height:"96"})}),e.jsxs(ke,{className:"",children:[e.jsxs(n,{container:!0,spacing:2,children:[e.jsx(n,{item:!0,xs:12,md:9,children:e.jsx(_,{className:"p-3 shadow-xl border border-black border-dotted border-opacity-20",children:e.jsxs(n,{container:!0,spacing:3,sx:{height:{xs:"auto",md:180}},children:[e.jsx(n,{className:"flex justify-center items-center",item:!0,xs:12,md:3,children:e.jsx(H,{style:{width:"110px",height:"110px",cursor:"pointer"},src:a==null?void 0:a.employeeImage})}),e.jsx(n,{item:!0,xs:12,md:5,justify:"center",alignItems:"center",className:"border-r border-dotted text-center md:text-left",children:e.jsxs("div",{className:"flex flex-col justify-around h-full",children:[e.jsxs(t,{className:"text-2xl ",variant:"overline",children:[" ",e.jsxs("span",{className:"text-xl",children:[" ",a==null?void 0:a.name]})]}),e.jsxs(t,{className:"text-2xl mt-2",variant:"overline",children:["Role: ",a==null?void 0:a.role]}),e.jsx(t,{className:"text-lg mt-2",variant:"subtitle1",children:a==null?void 0:a.email})]})}),e.jsxs(n,{item:!0,xs:12,md:4,justify:"center",alignItems:"center",children:[e.jsxs("div",{className:"flex flex-col justify-around h-full items-center",children:[e.jsx(t,{style:{letterSpacing:"3px"},className:"text-lg uppercase ",variant:"",children:"Acess given"}),e.jsx("div",{className:"grid grid-cols-2 gap-5",children:(v=a==null?void 0:a.access)==null?void 0:v.map(s=>e.jsx(t,{className:"text-2xl mt-2",variant:"overline",children:s.title}))})]})," "]})]})})}),e.jsx(n,{item:!0,xs:12,md:3,sx:{height:{xs:"auto",md:180}},children:e.jsx(_,{style:{backgroundImage:'url("https://t3.ftcdn.net/jpg/03/22/30/46/240_F_322304683_7ysRarFkmy2osfPKTOYQv7qTPofKelfb.jpg")'},className:"pt-2 shadow-xl bg-cover",children:e.jsx(n,{container:!0,sx:{height:170},children:e.jsxs("div",{className:"flex flex-col justify-around h-full w-full text-center",children:[e.jsx(t,{className:"text-2xl font-extrabold text-white",variant:"overline",children:e.jsx("span",{className:"text-xl",children:"Revenue Generated"})}),e.jsx(t,{className:"text-2xl mt-2 text-white",variant:"overline",children:e.jsxs("span",{className:"text-2xl",children:["₹ ",ge((x==null?void 0:x.data)||0)]})})]})})})})]}),e.jsx("div",{className:"mt-5",children:e.jsxs("div",{children:[e.jsxs(t,{style:{letterSpacing:"2px"},className:"text-2xl",variant:"overline",children:[" ",e.jsx("span",{className:"text-xl",children:"Bookings Made"})]}),e.jsxs("p",{className:"text-gray-400  mb-1",children:["Total (",(w=a.bookings)==null?void 0:w.length,")"]})]})}),e.jsx(n,{container:!0,children:((q=a==null?void 0:a.bookings)==null?void 0:q.length)>0?e.jsx(n,{item:!0,xs:12,md:12,children:(I=a==null?void 0:a.bookings)==null?void 0:I.map((s,l)=>{var N,b,h,M,f,k,m,p,u,B,P,U,z,W,L,G;return e.jsx("div",{children:e.jsxs(_,{className:"p-3 shadow-xl border border-black border-dotted border-opacity-20 mb-4",children:[e.jsxs(n,{container:!0,sx:{height:{xs:"auto",md:180}},children:[e.jsx(n,{item:!0,xs:12,md:5,justify:"center",alignItems:"center",className:"border-r border-dotted text-center px-4 md:text-left",children:e.jsxs("div",{className:"flex flex-col mt-3",children:[e.jsxs(t,{className:"text-xl  text-gray-400",variant:"overline",children:["booking no #",l+1]})," ",e.jsxs("div",{className:" flex justify-center items-center gap-2  rounded-xl",children:[e.jsxs("div",{className:"max-w-[200px] break-words ",children:[e.jsx("p",{className:"text-gray-500",children:"From"}),e.jsx("p",{className:"text-xl max-h-[50px] max-w-[150px] overflow-hidden",children:s.pickupPoint})]}),e.jsx("div",{className:"border-b border-dotted border-[#59c5b9]  flex-1  justify-center h-7",children:e.jsx(ae,{component:"span",sx:{width:10,height:10,mr:1},children:(N=j[7])==null?void 0:N.icon})}),e.jsxs("div",{className:"max-w-[200px] break-words ",children:[e.jsx("p",{className:"text-gray-500",children:"To"}),e.jsx("p",{className:"text-xl max-h-[50px] max-w-[150px] overflow-hidden",children:s.dropPoint})]})]}),e.jsxs("div",{className:" justify-center items-center",children:[e.jsx("p",{className:"text-gray-400 mt-5 mb-1",children:"Duration of rent"}),e.jsxs("div",{className:"flex justify-center items-center mt-2",children:[e.jsxs(t,{className:"text-xl",variant:"overline",children:[" ",e.jsxs("span",{className:"text-lg",children:["[",s.fromDate,"] "]})]}),e.jsxs(t,{className:"text-xl",variant:"overline",children:[" ",e.jsxs("span",{className:"text-lg",children:[" - [",s.toDate,"]"]})]})," "]})]})," "]})}),e.jsxs(n,{className:"border-r border-dotted text-center md:text-left",item:!0,xs:12,md:3,justify:"center",alignItems:"center",children:[e.jsxs("div",{className:"flex flex-col justify-around h-full items-center",children:[e.jsx(t,{style:{letterSpacing:"3px"},className:"text-lg uppercase ",variant:"",children:"Car selected"}),e.jsxs("div",{className:"grid grid-cols-2 gap-5 p-3 w-full",children:[e.jsx(t,{className:"text-2xl mt-2 text-center",variant:"overline",children:(b=s.carSelected)==null?void 0:b.name}),e.jsx(t,{className:"text-2xl mt-2 text-center ",variant:"overline",children:(h=s.carSelected)==null?void 0:h.manufacturingCompany}),e.jsx(t,{className:"text-2xl mt-2 text-center",variant:"overline",children:(M=s.carSelected)==null?void 0:M.vehicleNumber}),e.jsxs(t,{className:"text-2xl mt-2 text-center",variant:"overline",children:["Insurance :",e.jsx("br",{}),Y((f=s.carSelected)==null?void 0:f.insurance)]})]})]})," "]}),e.jsxs(n,{className:"border-r border-dotted text-center md:text-left",item:!0,xs:12,md:3,justify:"center",alignItems:"center",children:[e.jsxs("div",{className:"flex flex-col justify-around h-full items-center",children:[e.jsx(t,{style:{letterSpacing:"3px"},className:"text-lg uppercase ",variant:"",children:"customer selected"}),e.jsxs("div",{className:"grid grid-cols-2 gap-5 p-3 w-full",children:[e.jsx(t,{className:"text-2xl mt-2",variant:"overline",children:(k=s.customerSelected)==null?void 0:k.name}),e.jsx(t,{className:"text mt-2",variant:"caption",children:e.jsx("p",{className:"text-sm",style:{maxWidth:"130px",wordWrap:"break-word"},children:(m=s.customerSelected)==null?void 0:m.email})}),e.jsxs(t,{className:"text-2xl mt-2",variant:"overline",children:["pincode :",e.jsx("br",{}),(p=s.customerSelected)==null?void 0:p.pincode]}),e.jsx(t,{className:"text-2xl mt-2 flex justify-center items-center",variant:"overline",children:(u=s.customerSelected)==null?void 0:u.contactNumber})]})]})," "]}),e.jsxs(n,{minHeight:40,borderRadius:1,bgcolor:"#59c5b9",item:!0,xs:12,md:1,justify:"center",alignItems:"center",children:[e.jsx(t,{onClick:()=>g(l),className:"text-2xl mt-2 flex justify-center cursor-pointer items-center h-full",variant:"overline",children:i[l]?"Show Less":"Show More"})," "]})]}),i[l]&&e.jsxs(e.Fragment,{children:[e.jsxs(n,{className:"px-4 pt-2 border-t border-dotted border-gray-400",item:!0,xs:12,md:12,children:[e.jsx(t,{style:{letterSpacing:"3px"},className:"text-lg uppercase mb-5 ",variant:"",children:"Booking details"}),e.jsxs("div",{className:"grid md:grid-cols-3 mt-2 space-y-2",children:[e.jsxs(t,{className:"text-2xl",variant:"subtitle2",children:["From date : ",e.jsx("span",{className:"text-lg",children:s.fromDate})]}),e.jsxs(t,{className:"text-2xl",variant:"subtitle2",children:["To date : ",e.jsx("span",{className:"text-lg",children:s.fromDate})]}),e.jsxs(t,{className:"text-2xl",variant:"subtitle2",children:["Total amount : ",e.jsxs("span",{className:"text-lg",children:["₹",s.total]})]}),e.jsxs(t,{className:"text-2xl",variant:"subtitle2",children:["Discount given : ",e.jsxs("span",{className:"text-lg",children:["₹",s.discount]})]}),e.jsxs(t,{className:"text-2xl",variant:"subtitle2",children:["Tax : ",e.jsxs("span",{className:"text-lg",children:["₹",s.tax]})]}),e.jsxs(t,{className:"text-2xl",variant:"subtitle2",children:["Booking status : ",e.jsx("span",{className:"text-lg",children:s.status})]})]})]}),e.jsx(n,{className:"px-4 pt-4 pb-3",item:!0,xs:12,md:12,children:s.driver&&e.jsxs(e.Fragment,{children:[e.jsx(t,{className:"text-lg uppercase mb-5 underline",variant:"",children:"Driver Details"}),e.jsx("br",{}),e.jsxs("div",{className:"mt-4 space-y-3",children:[e.jsxs(t,{variant:"subtitle1 mb-4",children:["Name: ",(B=s==null?void 0:s.driver)==null?void 0:B.driverName]}),e.jsxs(t,{variant:"subtitle1",children:["Contact-: ",(P=s==null?void 0:s.driver)==null?void 0:P.contactNumber]})]})]})}),e.jsxs(n,{className:"px-4 pt-2 pb-3",item:!0,xs:12,md:12,children:[e.jsx(t,{className:"text-lg uppercase mb-5 underline",variant:"",children:"Invoice items"}),e.jsxs("div",{className:"flex flex-col border",children:[e.jsxs("div",{className:"flex bg-gray-400",children:[e.jsx("p",{className:"w-[300px] border-r px-2 py-1 font-semibold",children:"Item"}),e.jsx("p",{className:"w-[300px] px-2 py-1 font-semibold",children:"Amount"})]}),s.invoiceDetails.map((O,V)=>e.jsxs("div",{className:"flex even:bg-gray-500",children:[e.jsx("p",{style:{wordWrap:"break-word"},className:"w-[300px] border-r px-2 py-1",children:O.name}),e.jsxs("p",{className:"w-[300px] px-2 py-1",children:["₹ ",O.amount]})]},V)),e.jsxs("div",{className:"flex bg-gray-500",children:[e.jsx("p",{style:{wordWrap:"break-word"},className:"w-[300px] border-r px-2 py-1 font-semibold",children:"Subtotal"}),e.jsxs("p",{className:"w-[300px] px-2 py-1",children:["₹ ",s.subTotals]})]}),e.jsxs("div",{className:"flex even:bg-gray-500",children:[e.jsx("p",{style:{wordWrap:"break-word"},className:"w-[300px] border-r px-2 py-1 font-semibold",children:"Advance"}),e.jsxs("p",{className:"w-[300px] px-2 py-1",children:["₹ -",s.advanceAmount]})]}),e.jsxs("div",{className:"flex bg-gray-400",children:[e.jsx("p",{style:{wordWrap:"break-word"},className:"w-[300px] border-r px-2 py-1 font-semibold",children:"Total"}),e.jsxs("p",{className:"w-[300px] px-2 py-1",children:["₹ ",s.total]})]})]})]}),s.isKilometreUpdated&&e.jsxs(n,{className:"px-4 pt-2 pb-3 flex gap-2 ",item:!0,xs:12,md:12,children:[e.jsx(t,{Z:!0,className:"text-lg uppercase mb-5 underline",variant:"",children:"Distance covered by car in this trip -"}),e.jsxs(t,{Z:!0,className:"text-lg uppercase mb-5 ",variant:"",children:["[ ",s.kilometreCovered," kms ]"]})]}),e.jsxs(n,{className:"px-4 pt-2 border-t border-dotted border-gray-400",item:!0,xs:12,md:12,children:[e.jsx(t,{style:{letterSpacing:"3px"},className:"text-lg uppercase mb-5 ",variant:"",children:"Customer details"}),e.jsx(H,{className:"md:mx-auto",style:{width:"110px",height:"110px",cursor:"pointer"},src:(z=(U=s.customerSelected)==null?void 0:U.customerImage)==null?void 0:z.url}),e.jsxs("div",{className:"grid md:grid-cols-3 mt-2 space-y-2 pb-4",children:[e.jsxs(t,{className:"text-2xl",variant:"subtitle2",children:["Name: ",e.jsx("span",{className:"text-lg",children:s.customerSelected.name})]}),e.jsxs(t,{className:"text-2xl",variant:"subtitle2",children:["Contact Number :"," ",e.jsx("span",{className:"text-lg",children:s.customerSelected.contactNumber})]}),e.jsxs(t,{className:"text-2xl",variant:"subtitle2",children:["Email : ",e.jsx("span",{className:"text-lg",children:s.customerSelected.email})]}),e.jsxs(t,{className:"text-2xl",variant:"subtitle2",children:["Passport Number :"," ",e.jsx("span",{className:"text-lg",children:s.customerSelected.passportNumber})]}),e.jsxs(t,{className:"text-2xl",variant:"subtitle2",children:["Pincode :"," ",e.jsx("span",{className:"text-lg",children:s.customerSelected.pincode})]}),e.jsxs(t,{className:"text-2xl",variant:"subtitle2",children:["State : ",e.jsx("span",{className:"text-lg",children:s.customerSelected.state})]}),e.jsxs(t,{style:{maxWidth:"full",wordWrap:"break-word"},className:"text-2xl",variant:"subtitle2",children:["Address :"," ",e.jsx("span",{className:"text-lg",children:s.customerSelected.address})]}),e.jsxs(t,{className:"text-2xl",variant:"subtitle2",children:["Locality :"," ",e.jsx("span",{className:"text-lg",children:s.customerSelected.locality})]}),e.jsxs(t,{className:"text-2xl",variant:"subtitle2",children:["City/District :"," ",e.jsx("span",{className:"text-lg",children:s.customerSelected.cityOrDistrict})]})]})]}),e.jsxs(n,{className:"px-4 pt-2 border-t border-dotted border-gray-400",item:!0,xs:12,md:12,children:[e.jsx(t,{style:{letterSpacing:"3px"},className:"text-lg uppercase mb-5 ",variant:"",children:"Car details"}),e.jsx(H,{variant:"square",className:"md:mx-auto",style:{width:"300px",height:"150px",cursor:"pointer"},src:(L=(W=s.carSelected)==null?void 0:W.carImage)==null?void 0:L.url}),e.jsxs("div",{className:"grid md:grid-cols-3 mt-2 space-y-2 pb-4",children:[e.jsxs(t,{className:"text-2xl",variant:"subtitle2",children:["Name: ",e.jsx("span",{className:"text-lg",children:s.carSelected.name})]}),e.jsxs(t,{className:"text-2xl",variant:"subtitle2",children:["Vehicle Number :",e.jsx("span",{className:"text-lg",children:(G=s.carSelected)==null?void 0:G.vehicleNumber})]}),e.jsxs(t,{className:"text-2xl",variant:"subtitle2",children:["Manufacturing Company :",e.jsx("span",{className:"text-lg",children:s.carSelected.manufacturingCompany})]}),e.jsxs(t,{className:"text-2xl",variant:"subtitle2",children:["year Of Manufacturing :"," ",e.jsx("span",{className:"text-lg",children:s.carSelected.yearOfManufacturing})]}),e.jsxs(t,{className:"text-2xl",variant:"subtitle2",children:["Fuel Type ",e.jsx("span",{className:"text-lg",children:s.carSelected.fuelType})]}),e.jsxs(t,{className:"text-2xl",variant:"subtitle2",children:["Transmission :"," ",e.jsx("span",{className:"text-lg",children:s.carSelected.transmission})]}),e.jsxs(t,{className:"text-2xl",variant:"subtitle2",children:["Insurance :"," ",e.jsx("span",{className:"text-lg",children:Y(s.carSelected.insurance)})]}),e.jsxs(t,{className:"text-2xl",variant:"subtitle2",children:["lastService :"," ",e.jsx("span",{className:"text-lg",children:Y(s.carSelected.lastService)})]}),e.jsxs(t,{className:"text-2xl",variant:"subtitle2",children:["serviceInterval :"," ",e.jsxs("span",{className:"text-lg",children:[s.carSelected.serviceInterval," Kms"]})]})]})]}),e.jsxs(t,{onClick:()=>g(l),className:"text-xl flex gap-2 cursor-pointer pt-4 justify-center items-center w-full  text-gray-400",variant:"overline",children:[e.jsxs("span",{children:["end-booking no #",l+1]}),e.jsx("span",{children:i[l]?"Show Less":"Show More"})]})]})]})},l)})}):e.jsx(_,{className:"p-3 shadow-xl border border-black border-dotted border-opacity-20 mb-4",children:"No bookings found"})})]}),e.jsxs("div",{className:"flex justify-between p-5 px-7",children:[e.jsx("div",{children:e.jsx($,{color:"secondary"})}),e.jsxs("div",{children:[e.jsx($,{color:"primary"}),e.jsx($,{onClick:c,color:"primary",children:"Close"})]})]})]})})}te.propTypes={open:r.bool.isRequired,onClose:r.func.isRequired,userDetails:r.shape({name:r.string.isRequired,email:r.string.isRequired,role:r.string.isRequired,bookings:r.array.isRequired,employeeImage:r.string,access:r.arrayOf(r.shape({value:r.string.isRequired})).isRequired}).isRequired};function Le({setDataForPopup:d,id:c,selected:a,name:j,userName:i,email:y,role:g,bookings:x,employeeImage:v,access:w,isBlocked:q,handleClick:I}){var V,Q;console.log(v);const[s,l]=E.useState(null),[N,b]=E.useState(q),{user:h}=le.getState(),M=(V=h==null?void 0:h.user)==null?void 0:V.role,f=(Q=h==null?void 0:h.user)==null?void 0:Q._id,k=re(),m=me(),p=pe(),[u,B]=E.useState(!1),P=()=>{B(!0)},U=o=>{l(o.currentTarget)},z=()=>{l(null)},W=o=>{f===o?A.error("self deletion not permitted"):m.mutate(o),l(null)},L=o=>{ee.setState({id:o}),console.log(o),k.push(ie),l(null)},G=o=>{const T={idb:o,blocked:!1};f===o?A.error("self block/unblock not permitted"):p.mutate(T,{onSuccess:()=>{b(!1),A.success("Employee Unblocked"),l(null)}})},O=o=>{const T={idb:o,blocked:!0};f===o?A.error("self block/unblock not permitted"):p.mutate(T,{onSuccess:()=>{b(!0),A.success("Employee Blocked"),l(null)}})};return e.jsxs(e.Fragment,{children:[e.jsxs(Se,{hover:!0,tabIndex:-1,role:"checkbox",selected:a,children:[e.jsx(S,{padding:"checkbox",children:e.jsx(Ce,{disableRipple:!0,checked:a,onChange:I})}),e.jsx(S,{component:"th",scope:"row",padding:"none",children:e.jsxs(ne,{alignItems:"left",marginLeft:2,direction:"column",children:[e.jsxs("div",{className:"flex gap-3 items-center",children:[e.jsx("div",{children:e.jsx(H,{alt:j,src:v})}),e.jsxs("div",{children:[e.jsxs(t,{className:"flex  items-center gap-2",variant:"overline",noWrap:!0,children:[j,g==="superAdmin"?e.jsx("div",{className:"w-5 pt-[-5px]",children:e.jsxs("svg",{viewBox:"0 0 1024.00 1024.00",className:"icon",version:"1.1",xmlns:"http://www.w3.org/2000/svg",fill:"#000000",transform:"matrix(1, 0, 0, 1, 0, 0)",stroke:"#000000",strokeWidth:"0.01024",children:[e.jsx("g",{id:"SVGRepo_bgCarrier",strokeWidth:"0"}),e.jsx("g",{id:"SVGRepo_tracerCarrier",strokeLinecap:"round",strokeLinejoin:"round"}),e.jsxs("g",{id:"SVGRepo_iconCarrier",children:[e.jsx("path",{d:"M57 438.312l109.536 488.72h697.336l109.536-488.72-259.176 156.816-187.856-333.088-205.352 333.088z",fill:"#EC9312"}),e.jsx("path",{d:"M629.048 211.888c0 58.912-47.752 106.656-106.672 106.656-58.92 0-106.664-47.744-106.664-106.656 0-58.976 47.744-106.656 106.664-106.656s106.672 47.688 106.672 106.656z",fill:"#CB1B5B"}),e.jsx("path",{d:"M522.376 105.232c-58.92 0-106.664 47.68-106.664 106.656 0 58.912 47.744 106.656 106.664 106.656V105.232z",fill:"#E5226B"}),e.jsx("path",{d:"M57 438.312l109.536 488.72h697.336z",fill:"#F4A832"}),e.jsx("path",{d:"M973.408 438.312l-109.536 488.72H166.536z",fill:"#F4A832"}),e.jsx("path",{d:"M166.536 927.032h697.336L515.2 715.832z",fill:"#F5B617"}),e.jsx("path",{d:"M1017.856 409.44a55.2 55.2 0 0 1-55.264 55.208 55.184 55.184 0 0 1-55.216-55.208 55.2 55.2 0 0 1 55.216-55.264 55.2 55.2 0 0 1 55.264 55.264z",fill:"#0472AF"}),e.jsx("path",{d:"M962.592 354.176a55.2 55.2 0 0 0-55.216 55.264 55.184 55.184 0 0 0 55.216 55.208V354.176z",fill:"#1A8DCC"}),e.jsx("path",{d:"M116.656 409.44a55.216 55.216 0 0 1-55.272 55.208A55.208 55.208 0 0 1 6.144 409.44a55.208 55.208 0 0 1 55.24-55.264 55.224 55.224 0 0 1 55.272 55.264z",fill:"#0472AF"}),e.jsx("path",{d:"M61.384 354.176A55.216 55.216 0 0 0 6.144 409.44a55.2 55.2 0 0 0 55.24 55.208V354.176z",fill:"#0092D2"})]})]})}):null]}),e.jsx("div",{children:y})]})]}),e.jsx(t,{color:"",variant:"",noWrap:!0})]})}),e.jsx(S,{children:i}),e.jsx(S,{children:e.jsx("div",{className:"w-full flex justify-center items-center",children:(x==null?void 0:x.length)||0})}),e.jsx(S,{children:w.map((o,T)=>e.jsxs("span",{className:"border-r border-gray-600 pl-1 pr-2 capitalize",children:[" ",o.value]},T))}),e.jsx(S,{children:e.jsx(je,{color:N&&"blocked"&&"error"||"success",children:N?"Blocked":"Active"})}),e.jsx(S,{align:"right",children:g==="superAdmin"&&M==="admin"?"":e.jsx(D,{onClick:U,children:e.jsx(R,{icon:"eva:more-vertical-fill"})})})]}),e.jsxs(ce,{open:!!s,anchorEl:s,onClose:z,anchorOrigin:{vertical:"top",horizontal:"left"},transformOrigin:{vertical:"top",horizontal:"right"},PaperProps:{sx:{width:140}},children:[e.jsxs(F,{onClick:P,children:[e.jsx(R,{icon:"eva:eye-fill",sx:{mr:2}}),"view"]}),N?e.jsxs(F,{onClick:()=>Z(()=>G(c),be,l(null),c),children:[e.jsx(R,{icon:"mdi:user-tick",sx:{mr:2}}),"Un-Block"]}):e.jsxs(F,{onClick:()=>Z(()=>O(c),ve,l(null),c),children:[e.jsx(R,{icon:"mdi:user-block",sx:{mr:2}}),"Block"]}),e.jsxs(F,{onClick:()=>L(c),children:[e.jsx(R,{icon:"eva:edit-fill",sx:{mr:2}}),"Edit"]}),e.jsxs(F,{onClick:()=>Z(()=>W(c),Ne,l(null),c),sx:{color:"error.main"},children:[e.jsx(R,{icon:"eva:trash-2-outline",sx:{mr:2}}),"Delete"]})]}),e.jsx(te,{open:u,onClose:()=>(B(!1),l(null)),userDetails:{id:c,name:j,email:y,role:g,bookings:x,employeeImage:v,access:w}})]})}Le.propTypes={id:r.string.isRequired,selected:r.bool.isRequired,name:r.string.isRequired,userName:r.string.isRequired,email:r.string.isRequired,role:r.string.isRequired,employeeImage:r.string,access:r.arrayOf(r.shape({value:r.string.isRequired})).isRequired,bookings:r.array.isRequired,isBlocked:r.bool.isRequired,handleClick:r.func.isRequired};Ge.propTypes={isEdit:r.bool.isRequired};function Ge({isEdit:d}){var k;const c=ee(m=>m.id),a=he(),j=ue(),i=ze(c),[y,g]=E.useState(),[x,v]=E.useState();console.log(i);const w=Re().shape({name:K().required("First name is required"),email:K().required("Email is required"),userName:K().required("Username is required").min(6,"Username must be at least 6 characters long").max(20,"Username cannot be longer than 20 characters").matches(/^[a-zA-Z0-9_]+$/,"Username can only contain letters, numbers, and underscores"),role:K().required("Role is required"),access:Ee().min(1,"Please select at least one option")}),q=[{title:"Fleet Management",value:"fleet"},{title:"Customer Management",value:"customer"},{title:"Booking Management",value:"booking"},{title:"Reminder Management",value:"reminder"}],I={name:"",userName:"",password:"",role:"",access:[]},s=qe({resolver:Fe(w),defaultValues:I}),{handleSubmit:l,control:N,reset:b,formState:{errors:h}}=s;E.useEffect(()=>{i.status==="success"&&d?(console.log(i.data),v(i.data),b(i.data)):(b({name:""}),g(null))},[(i==null?void 0:i.status)==="success",b,d]);const M=m=>{if(d){console.log("first");const p={...m,employeeImage:y};console.log(p),j.mutate(p)}else{console.log("first");const p={...m,employeeImage:y};a.mutate(p)}console.log(m)},f=[{value:"admin",label:"Admin"}];return e.jsx(se,{children:e.jsx(Ie,{methods:s,onSubmit:l(M),children:e.jsxs(Ue,{children:[e.jsx(C,{layout:[12,6],children:e.jsx(Ae,{cloudinaryLink:d&&(x==null?void 0:x.employeeImage),label:"Employee Image",isEdit:d,accept:"image/*, application/pdf",name:"employeeImage",onChange:m=>{console.log(m);const p=m;console.log(p);const u=new FileReader;console.log(u),u.readAsDataURL(p),u.onloadend=()=>{console.log(u),g(u.result)}}})}),e.jsx(C,{layout:[12,6],children:e.jsx(Me,{label:"Allocate access to",name:"access",errors:h,options:q})}),e.jsx(C,{layout:[12,6],children:e.jsx(J,{name:"name",label:"Name"})}),e.jsx(C,{layout:[12,6],children:e.jsx(J,{name:"userName",label:"User name"})}),e.jsx(C,{layout:[12,6],children:e.jsx(J,{name:"email",label:"Email"})}),!d&&e.jsx(C,{layout:[12,6],children:e.jsx(Be,{name:"password",label:"Password"})}),((k=i==null?void 0:i.data)==null?void 0:k.role)!=="superAdmin"&&e.jsx(C,{layout:[12,6],children:e.jsx(Te,{label:"Select role",name:"role",control:N,errors:h,menuItems:f})}),e.jsx(Pe,{disabled:a.isPending||j.isPending,name:a.isPending||j.isPending?"Loading":`${d?"Update":"Create"} Employee`})]})})})}export{Ge as E,Le as U,is as u};
