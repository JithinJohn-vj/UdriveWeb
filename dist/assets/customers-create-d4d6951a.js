import{r as b,j as e,d as ae,I as O,A as Y,T as s,B as ie,b as Q,P as n,u as ce,a as oe,a9 as de,a7 as z,bj as xe}from"./index-e2557835.js";import{E as se}from"./EditId-3a4900d9.js";import{c as me,d as he,a as ue}from"./Mutations-3f3892ef.js";import{L as pe}from"./label-e738403c.js";import{f as je,C as be,n as ve}from"./CustomModalMessages-21d53744.js";import{D as ge,C as D,a as Ne}from"./FormatChnager-3630efc0.js";import{N as fe}from"./NavIconsDualtonned-629598de.js";import{b as ye,a as Ce}from"./Queries-1edd9701.js";import{C as te}from"./Container-19e483a1.js";import{D as we,a as Se}from"./dayjs.min-6085eb1e.js";import{G as c}from"./Grid-f905a886.js";import{C as V}from"./Card-6c6ce8af.js";import{T as ke,a as W}from"./TableRow-cd1bf836.js";import{C as le}from"./KeyboardArrowRight-ffd3b3e1.js";import{c as Ie,a as H}from"./index.esm-ebced901.js";import{u as Re,d as Te,R as Z,k as Pe,f as qe}from"./TagsInput-6b6695f6.js";import{o as Me}from"./yup-08e917aa.js";import{C as j}from"./CustomGrid-a5eaf6b9.js";import{A as Ae}from"./RHFAvtarUpload-e3dcd148.js";import{M as Fe}from"./RHFMultiFileUpload-006d2ba5.js";import{C as Be}from"./CustomSubmitButton-a5ee7712.js";import{C as Le}from"./CustomContainerGrid-0fd00d96.js";import{T as ee,I as We}from"./numeral-d348d23e.js";function re({open:m,onClose:g,userDetails:t}){var w,u,C;const y=fe();console.log(t);const[l,U]=b.useState(Array(t.bookings.length).fill(!1)),v=ye(t==null?void 0:t.id),N=a=>{const o=[...l];o[a]=!o[a],U(o)};return e.jsx(te,{children:e.jsxs(we,{maxWidth:"lg",fullWidth:!0,open:m,onClose:g,children:[e.jsx(ge,{className:"bg-[#59c5b9] text-white  rounded",children:"Customer Detailed view"}),e.jsx(ae,{"aria-label":"close",onClick:g,sx:{position:"absolute",right:10,top:5,color:"white"},children:e.jsx(O,{icon:"fa:close",width:"96",height:"96"})}),e.jsxs(Se,{className:"",children:[e.jsxs(c,{container:!0,spacing:2,children:[e.jsx(c,{item:!0,xs:12,md:9,children:e.jsx(V,{className:"p-3 shadow-xl border border-black border-dotted border-opacity-20",children:e.jsxs(c,{container:!0,spacing:3,sx:{height:{xs:"auto",md:180}},children:[e.jsx(c,{className:"flex justify-center items-center",item:!0,xs:12,md:3,children:e.jsx(Y,{style:{width:"110px",height:"110px",cursor:"pointer"},src:t==null?void 0:t.customerImage})}),e.jsx(c,{item:!0,xs:12,md:5,justify:"center",alignItems:"center",className:"border-r border-dotted text-center md:text-left",children:e.jsxs("div",{className:"flex flex-col justify-around h-full",children:[e.jsxs(s,{className:"text-2xl ",variant:"overline",children:[" ",e.jsxs("span",{className:"text-xl",children:[" ",t==null?void 0:t.name]})]}),e.jsxs(s,{className:"text-2xl mt-2",variant:"overline",children:["Contact: ",t==null?void 0:t.contactNumber]}),e.jsx(s,{className:"text-lg mt-2",variant:"subtitle1",children:t==null?void 0:t.email}),e.jsxs(s,{className:"text-lg mt-2",variant:"subtitle1",children:["Passport :",t==null?void 0:t.passportNumber]})]})}),e.jsx(c,{item:!0,xs:12,md:4,justify:"center",alignItems:"center",children:e.jsxs("div",{className:"flex flex-col justify-around h-full",children:[e.jsx(s,{style:{letterSpacing:"3px"},className:"text-lg uppercase ",variant:"",children:"Address"}),e.jsx(s,{className:"text-2xl mt-2",variant:"overline",children:t==null?void 0:t.address}),e.jsx(s,{className:"text-lg mt-2",variant:"subtitle1",children:t==null?void 0:t.locality}),e.jsxs(s,{className:"text-lg mt-2",variant:"subtitle1",children:[t==null?void 0:t.cityOrDistrict,", ",t.pincode]})]})})]})})}),e.jsx(c,{item:!0,xs:12,md:3,sx:{height:{xs:"auto",md:180}},children:e.jsx(V,{style:{backgroundImage:'url("https://t3.ftcdn.net/jpg/03/22/30/46/240_F_322304683_7ysRarFkmy2osfPKTOYQv7qTPofKelfb.jpg")'},className:"pt-2 shadow-xl bg-cover",children:e.jsx(c,{container:!0,sx:{height:170},children:e.jsxs("div",{className:"flex flex-col justify-around h-full w-full text-center",children:[e.jsx(s,{className:"text-2xl font-extrabold text-white",variant:"overline",children:e.jsx("span",{className:"text-xl",children:"Revenue Generated"})}),e.jsx(s,{className:"text-2xl mt-2 text-white",variant:"overline",children:e.jsxs("span",{className:"text-2xl",children:["₹ ",je((v==null?void 0:v.data)||0)]})})]})})})})]}),e.jsx("div",{className:"mt-5",children:e.jsxs("div",{children:[e.jsxs(s,{style:{letterSpacing:"2px"},className:"text-2xl",variant:"overline",children:[" ",e.jsx("span",{className:"text-xl",children:"Bookings Made"})]}),e.jsxs("p",{className:"text-gray-400  mb-1",children:["Total (",(w=t.bookings)==null?void 0:w.length,")"]})]})}),e.jsx(c,{container:!0,children:((u=t==null?void 0:t.bookings)==null?void 0:u.length)>0?e.jsx(c,{item:!0,xs:12,md:12,children:(C=t==null?void 0:t.bookings)==null?void 0:C.map((a,o)=>{var R,S,p,h,T,P,k,q,M,A,f,F,B,d,I,K,E,J,_,r,x,i,G;return e.jsx("div",{children:e.jsxs(V,{className:"p-3 shadow-xl border border-black border-dotted border-opacity-20 mb-4",children:[e.jsxs(c,{container:!0,sx:{height:{xs:"auto",md:180}},children:[e.jsx(c,{item:!0,xs:12,md:5,justify:"center",alignItems:"center",className:"border-r border-dotted text-center px-4 md:text-left",children:e.jsxs("div",{className:"flex flex-col mt-3",children:[e.jsxs(s,{className:"text-xl  text-gray-400",variant:"overline",children:["booking no #",o+1]})," ",e.jsxs("div",{className:" flex justify-center items-center gap-2  rounded-xl",children:[e.jsxs("div",{className:"max-w-[200px] break-words ",children:[e.jsx("p",{className:"text-gray-500",children:"From"}),e.jsx("p",{className:"text-xl max-h-[50px] max-w-[150px] overflow-hidden",children:a.pickupPoint})]}),e.jsx("div",{className:"border-b border-dotted border-[#59c5b9]  flex-1  justify-center h-7",children:e.jsx(ie,{component:"span",sx:{width:10,height:10,mr:1},children:(R=y[7])==null?void 0:R.icon})}),e.jsxs("div",{className:"max-w-[200px] break-words ",children:[e.jsx("p",{className:"text-gray-500",children:"To"}),e.jsx("p",{className:"text-xl max-h-[50px] max-w-[150px] overflow-hidden",children:a.dropPoint})]})]}),e.jsxs("div",{className:" justify-center items-center",children:[e.jsx("p",{className:"text-gray-400 mt-5 mb-1",children:"Duration of rent"}),e.jsxs("div",{className:"flex justify-center items-center mt-2",children:[e.jsxs(s,{className:"text-xl",variant:"overline",children:[" ",e.jsxs("span",{className:"text-lg",children:["[",a.fromDate,"] "]})]}),e.jsxs(s,{className:"text-xl",variant:"overline",children:[" ",e.jsxs("span",{className:"text-lg",children:[" - [",a.toDate,"]"]})]})," "]})]})," "]})}),e.jsxs(c,{className:"border-r border-dotted text-center md:text-left",item:!0,xs:12,md:3,justify:"center",alignItems:"center",children:[e.jsxs("div",{className:"flex flex-col justify-around h-full items-center w-full",children:[e.jsx(s,{style:{letterSpacing:"3px"},className:"text-lg uppercase ",variant:"",children:"Car selected"}),e.jsxs("div",{className:"grid grid-cols-2 gap-5 p-3 w-full",children:[e.jsx(s,{className:"text-2xl mt-2 text-center",variant:"overline",children:(S=a.carSelected)==null?void 0:S.name}),e.jsx(s,{className:"text-2xl mt-2 text-center ",variant:"overline",children:(p=a.carSelected)==null?void 0:p.manufacturingCompany}),e.jsx(s,{className:"text-2xl mt-2 text-center",variant:"overline",children:(h=a.carSelected)==null?void 0:h.vehicleNumber}),e.jsxs(s,{className:"text-2xl mt-2 text-center",variant:"overline",children:["Insurance :",e.jsx("br",{}),D((T=a.carSelected)==null?void 0:T.insurance)]})]})]})," "]}),e.jsxs(c,{className:"border-r border-dotted text-center md:text-left",item:!0,xs:12,md:3,justify:"center",alignItems:"center",children:[e.jsxs("div",{className:"flex flex-col justify-around h-full items-center",children:[e.jsx(s,{style:{letterSpacing:"3px"},className:"text-lg uppercase ",variant:"",children:"Booking made by"}),e.jsxs("div",{className:"grid grid-cols-2 gap-5 p-3 w-full",children:[e.jsx(s,{className:"text-2xl mt-2",variant:"overline",children:(P=a.employee)==null?void 0:P.name}),e.jsx(s,{className:"text mt-2",variant:"caption",children:e.jsx("p",{className:"text-sm",style:{wordWrap:"break-word"},children:(k=a.employee)==null?void 0:k.email})}),e.jsxs(s,{className:"text-2xl mt-2",variant:"overline",children:["role :",e.jsx("br",{}),(q=a.employee)==null?void 0:q.role]}),e.jsxs(s,{className:"text-2xl mt-2 flex justify-center items-center",variant:"overline",children:["Is blocked :",e.jsx("br",{}),(M=a.employee)!=null&&M.isBlocked?"yes":"no"]})]})]})," "]}),e.jsxs(c,{minHeight:40,borderRadius:1,bgcolor:"#59c5b9",item:!0,xs:12,md:1,justify:"center",alignItems:"center",children:[e.jsx(s,{onClick:()=>N(o),className:"text-2xl mt-2 flex justify-center cursor-pointer items-center h-full",variant:"overline",children:l[o]?"Show Less":"Show More"})," "]})]}),l[o]&&e.jsxs(e.Fragment,{children:[e.jsxs(c,{className:"px-4 pt-2 border-t border-dotted border-gray-400",item:!0,xs:12,md:12,children:[e.jsx(s,{style:{letterSpacing:"3px"},className:"text-lg uppercase mb-5 ",variant:"",children:"Booking details"}),e.jsxs("div",{className:"grid md:grid-cols-3 mt-2 space-y-2",children:[e.jsxs(s,{className:"text-2xl",variant:"subtitle2",children:["From date : ",e.jsx("span",{className:"text-lg",children:a.fromDate})]}),e.jsxs(s,{className:"text-2xl",variant:"subtitle2",children:["To date : ",e.jsx("span",{className:"text-lg",children:a.fromDate})]}),e.jsxs(s,{className:"text-2xl",variant:"subtitle2",children:["Total amount : ",e.jsxs("span",{className:"text-lg",children:["₹",a.total]})]}),e.jsxs(s,{className:"text-2xl",variant:"subtitle2",children:["Discount given : ",e.jsxs("span",{className:"text-lg",children:["₹",a.discount]})]}),e.jsxs(s,{className:"text-2xl",variant:"subtitle2",children:["Tax : ",e.jsxs("span",{className:"text-lg",children:["₹",a.tax]})]}),e.jsxs(s,{className:"text-2xl",variant:"subtitle2",children:["Booking status : ",e.jsx("span",{className:"text-lg",children:a.status})]})]})]}),e.jsx(c,{className:"px-4 pt-4 pb-3",item:!0,xs:12,md:12,children:a.driver&&e.jsxs(e.Fragment,{children:[e.jsx(s,{className:"text-lg uppercase mb-5 underline",variant:"",children:"Driver Details"}),e.jsx("br",{}),e.jsxs("div",{className:"mt-4 space-y-3",children:[e.jsxs(s,{variant:"subtitle1 mb-4",children:["Name: ",(A=a==null?void 0:a.driver)==null?void 0:A.driverName]}),e.jsxs(s,{variant:"subtitle1",children:["Contact-: ",(f=a==null?void 0:a.driver)==null?void 0:f.contactNumber]})]})]})}),e.jsxs(c,{className:"px-4 pt-2 pb-3",item:!0,xs:12,md:12,children:[e.jsx(s,{className:"text-lg uppercase mb-5 underline",variant:"",children:"Invoice items"}),e.jsxs("div",{className:"flex flex-col border",children:[e.jsxs("div",{className:"flex bg-gray-400",children:[e.jsx("p",{className:"w-[300px] border-r px-2 py-1 font-semibold",children:"Item"}),e.jsx("p",{className:"w-[300px] px-2 py-1 font-semibold",children:"Amount"})]}),a.invoiceDetails.map((L,X)=>e.jsxs("div",{className:"flex even:bg-gray-500",children:[e.jsx("p",{style:{wordWrap:"break-word"},className:"w-[300px] border-r px-2 py-1",children:L.name}),e.jsxs("p",{className:"w-[300px] px-2 py-1",children:["₹ ",L.amount]})]},X)),e.jsxs("div",{className:"flex bg-gray-500",children:[e.jsx("p",{style:{wordWrap:"break-word"},className:"w-[300px] border-r px-2 py-1 font-semibold",children:"Subtotal"}),e.jsxs("p",{className:"w-[300px] px-2 py-1",children:["₹ ",a.subTotals]})]}),e.jsxs("div",{className:"flex even:bg-gray-500",children:[e.jsx("p",{style:{wordWrap:"break-word"},className:"w-[300px] border-r px-2 py-1 font-semibold",children:"Advance"}),e.jsxs("p",{className:"w-[300px] px-2 py-1",children:["₹ -",a.advanceAmount]})]}),e.jsxs("div",{className:"flex bg-gray-400",children:[e.jsx("p",{style:{wordWrap:"break-word"},className:"w-[300px] border-r px-2 py-1 font-semibold",children:"Total"}),e.jsxs("p",{className:"w-[300px] px-2 py-1",children:["₹ ",a.total]})]})]})]}),a.isKilometreUpdated&&e.jsxs(c,{className:"px-4 pt-2 pb-3 flex gap-2 ",item:!0,xs:12,md:12,children:[e.jsx(s,{Z:!0,className:"text-lg uppercase mb-5 underline",variant:"",children:"Distance covered by car in this trip -"}),e.jsxs(s,{Z:!0,className:"text-lg uppercase mb-5 ",variant:"",children:["[ ",a.kilometreCovered," kms ]"]})]}),e.jsxs(c,{className:"px-4 pt-2 border-t border-dotted border-gray-400",item:!0,xs:12,md:12,children:[e.jsx(s,{style:{letterSpacing:"3px"},className:"text-lg uppercase mb-5 ",variant:"",children:"Car details"}),e.jsx(Y,{variant:"square",className:"md:mx-auto",style:{width:"300px",height:"150px",cursor:"pointer"},src:(B=(F=a.carSelected)==null?void 0:F.carImage)==null?void 0:B.url}),e.jsxs("div",{className:"grid md:grid-cols-3 mt-2 space-y-2 pb-4",children:[e.jsxs(s,{className:"text-2xl",variant:"subtitle2",children:["Name: ",e.jsx("span",{className:"text-lg",children:a.carSelected.name})]}),e.jsxs(s,{className:"text-2xl",variant:"subtitle2",children:["Vehicle Number :",e.jsx("span",{className:"text-lg",children:(d=a.carSelected)==null?void 0:d.vehicleNumber})]}),e.jsxs(s,{className:"text-2xl",variant:"subtitle2",children:["Manufacturing Company :",e.jsx("span",{className:"text-lg",children:a.carSelected.manufacturingCompany})]}),e.jsxs(s,{className:"text-2xl",variant:"subtitle2",children:["year Of Manufacturing :"," ",e.jsx("span",{className:"text-lg",children:a.carSelected.yearOfManufacturing})]}),e.jsxs(s,{className:"text-2xl",variant:"subtitle2",children:["Fuel Type ",e.jsx("span",{className:"text-lg",children:a.carSelected.fuelType})]}),e.jsxs(s,{className:"text-2xl",variant:"subtitle2",children:["Transmission :"," ",e.jsx("span",{className:"text-lg",children:a.carSelected.transmission})]}),e.jsxs(s,{className:"text-2xl",variant:"subtitle2",children:["Insurance :"," ",e.jsx("span",{className:"text-lg",children:D(a.carSelected.insurance)})]}),e.jsxs(s,{className:"text-2xl",variant:"subtitle2",children:["lastService :"," ",e.jsx("span",{className:"text-lg",children:D(a.carSelected.lastService)})]}),e.jsxs(s,{className:"text-2xl",variant:"subtitle2",children:["serviceInterval :"," ",e.jsxs("span",{className:"text-lg",children:[a.carSelected.serviceInterval," Kms"]})]})]})]}),e.jsxs(c,{className:"px-4 pt-2 border-t border-dotted border-gray-400",item:!0,xs:12,md:12,children:[e.jsx(s,{style:{letterSpacing:"3px"},className:"text-lg uppercase mb-5 ",variant:"",children:"Booking made By details"}),e.jsx(Y,{className:"md:mx-auto",style:{width:"110px",height:"110px",cursor:"pointer"},src:(K=(I=a.employee)==null?void 0:I.employeeImage)==null?void 0:K.url}),e.jsxs("div",{className:"grid md:grid-cols-3 mt-2 space-y-2 pb-4",children:[e.jsxs(s,{className:"text-2xl",variant:"subtitle2",children:["Name:",e.jsx("span",{className:"text-lg",children:(E=a.employee)==null?void 0:E.name})]}),e.jsxs(s,{className:"text-2xl",variant:"subtitle2",children:["Email :",e.jsx("span",{className:"text-lg",children:(J=a.employee)==null?void 0:J.email})]}),e.jsxs(s,{className:"text-2xl",variant:"subtitle2",children:["username : ",e.jsx("span",{className:"text-lg",children:(_=a.employee)==null?void 0:_.userName})]}),e.jsxs(s,{className:"text-2xl",variant:"subtitle2",children:["Role : ",e.jsx("span",{className:"text-lg",children:(r=a.employee)==null?void 0:r.role})]}),e.jsxs(s,{className:"text-2xl",variant:"subtitle2",children:["Blocked :"," ",e.jsx("span",{className:"text-lg",children:(x=a.employee)!=null&&x.isBlocked?"yes":"no"})]}),e.jsxs(s,{className:"text-2xl ",variant:"subtitle2",children:["Access Given :",(G=(i=a.employee)==null?void 0:i.access)==null?void 0:G.map(L=>e.jsx("span",{className:"text-md border-r pr-1 pl-1",children:L.title}))]})]})]}),e.jsxs(s,{onClick:()=>N(o),className:"text-xl flex gap-2 cursor-pointer pt-4 justify-center items-center w-full  text-gray-400",variant:"overline",children:[e.jsxs("span",{children:["end-booking no #",o+1]}),e.jsx("span",{children:l[o]?"Show Less":"Show More"})]})]})]})},o)})}):e.jsx(V,{className:"p-3 shadow-xl border border-black border-dotted border-opacity-20 mb-4",children:"No bookings found"})})]}),e.jsxs("div",{className:"flex justify-between p-5 px-7",children:[e.jsx("div",{children:e.jsx(Q,{color:"secondary"})}),e.jsxs("div",{children:[e.jsx(Q,{color:"primary"}),e.jsx(Q,{onClick:g,color:"primary",children:"Close"})]})]})]})})}re.propTypes={open:n.bool.isRequired,onClose:n.func.isRequired,userDetails:n.shape({name:n.string.isRequired,email:n.string.isRequired,role:n.string.isRequired,bookings:n.array.isRequired,employeeImage:n.string,access:n.arrayOf(n.shape({value:n.string.isRequired})).isRequired}).isRequired};function Oe({id:m,name:g,contactNumber:t,email:y,bookings:l,passportNumber:U,address:v,locality:N,cityOrDistrict:w,customerImage:u,selected:C,passportImage:a,pincode:o,handleClick:R}){const[S,p]=b.useState(null),h=ce(),T=me(),P=d=>{p(d.currentTarget)},k=()=>{p(null)},q=d=>{T.mutate(d),p(null)},M=d=>{se.setState({id:d}),console.log(d),h.push(xe),p(null)},[A,f]=b.useState(!1),F=()=>{f(!0)},B=()=>{const d=document.createElement("a");d.href=`${a.replace("/upload/","/upload/fl_attachment:passport/")}`,d.download="passport.jpg",d.click()};return e.jsxs(e.Fragment,{children:[e.jsxs(ke,{hover:!0,tabIndex:-1,role:"checkbox",selected:C,children:[e.jsx(W,{padding:"checkbox",children:e.jsx(le,{disableRipple:!0,checked:C,onChange:R})}),e.jsx(W,{component:"th",scope:"row",padding:"none",children:e.jsxs(oe,{alignItems:"left",marginLeft:2,direction:"column",children:[e.jsxs("div",{className:"flex gap-3 items-center",children:[e.jsx("div",{children:e.jsx(Y,{alt:g,src:u||""})}),e.jsxs("div",{className:"flex flex-col",children:[e.jsx(s,{className:"",variant:"overline",noWrap:!0,children:g}),e.jsx(s,{color:"gray",variant:"overline",noWrap:!0,children:Ne(t)})," ",e.jsx(s,{color:" ",variant:"subtitle2",noWrap:!0,children:y})]})]}),e.jsx(s,{color:"",variant:"",noWrap:!0})]})}),e.jsx(W,{children:e.jsx(s,{variant:"overline",noWrap:!0,children:N})}),e.jsx(W,{align:"center",children:e.jsx("div",{className:"ml-[-20px]",children:l==null?void 0:l.length})}),e.jsx(W,{children:e.jsxs(pe,{color:(l==null?void 0:l.length)>=1&&"success"||"error",children:[l.length>=1?"Active":"inactive"," "]})}),e.jsx(W,{align:"right",children:e.jsx(ae,{onClick:P,children:e.jsx(O,{icon:"eva:more-vertical-fill"})})})]}),e.jsxs(de,{open:!!S,anchorEl:S,onClose:k,anchorOrigin:{vertical:"top",horizontal:"left"},transformOrigin:{vertical:"top",horizontal:"right"},PaperProps:{sx:{width:140}},children:[e.jsxs(z,{onClick:F,children:[e.jsx(O,{icon:"eva:eye-fill",sx:{mr:2}}),"view"]}),a&&e.jsxs(z,{onClick:B,children:[e.jsx(O,{icon:"ic:outline-download",sx:{mr:2}}),"Passport"]}),e.jsxs(z,{onClick:()=>M(m),children:[e.jsx(O,{icon:"eva:edit-fill",sx:{mr:2}}),"Edit"]}),e.jsxs(z,{onClick:()=>be(()=>q(m),ve,p(null),m),sx:{color:"error.main"},children:[e.jsx(O,{icon:"eva:trash-2-outline",sx:{mr:2}}),"Delete"]})]}),e.jsx(re,{open:A,onClose:()=>(f(!1),p(null)),userDetails:{id:m,name:g,contactNumber:t,email:y,bookings:l,pincode:o,passportNumber:U,locality:N,customerImage:u,address:v,cityOrDistrict:w}})]})}Oe.propTypes={id:n.string.isRequired,name:n.string.isRequired,contactNumber:n.string.isRequired,email:n.string.isRequired,bookings:n.array.isRequired,passportImage:n.string.isRequired,passportNumber:n.string.isRequired,locality:n.string.isRequired,selected:n.bool.isRequired,customerImage:n.string,handleClick:n.func.isRequired};Ue.propTypes={isEdit:n.bool.isRequired};function Ue({isEdit:m}){const g=se(r=>r.id),t=he(),y=ue(),l=Ce(g),U=[{value:"AN",label:"Andaman and Nicobar Island"},{value:"AP",label:"Andhra Pradesh"},{value:"AR",label:"Arunachal Pradesh"},{value:"AS",label:"Assam"},{value:"BR",label:"Bihar"},{value:"CG",label:"Chandigarh"},{value:"CH",label:"Chhattisgarh"},{value:"DH",label:"Dadra and Nagar Haveli"},{value:"DD",label:"Daman and Diu"},{value:"DL",label:"Delhi"},{value:"GA",label:"Goa"},{value:"GJ",label:"Gujarat"},{value:"HR",label:"Haryana"},{value:"HP",label:"Himachal Pradesh"},{value:"JK",label:"Jammu and Kashmir"},{value:"JH",label:"Jharkhand"},{value:"KA",label:"Karnataka"},{value:"KL",label:"Kerala"},{value:"LD",label:"Lakshadweep"},{value:"MP",label:"Madhya Pradesh"},{value:"MH",label:"Maharashtra"},{value:"MN",label:"Manipur"},{value:"ML",label:"Meghalaya"},{value:"MZ",label:"Mizoram"},{value:"NL",label:"Nagaland"},{value:"OR",label:"Odisha"},{value:"PY",label:"Puducherry"},{value:"PB",label:"Punjab"},{value:"RJ",label:"Rajasthan"},{value:"SK",label:"Sikkim"},{value:"TN",label:"Tamil Nadu"},{value:"TS",label:"Telangana"},{value:"TR",label:"Tripura"},{value:"UK",label:"Uttarakhand"},{value:"UP",label:"Uttar Pradesh"},{value:"WB",label:"West Bengal"}],[v,N]=b.useState(""),[w,u]=b.useState(""),[C,a]=b.useState(""),[o,R]=b.useState(!1),[S,p]=b.useState(),[h,T]=b.useState(null),[P,k]=b.useState(null),q=()=>{R(!o),o?(u(""),a("")):(u(v),a(v))},M=Ie().shape({name:H().required("First name is required"),email:H().required("email is required"),state:H().required("state is required"),locality:H().required("locality is required"),cityOrDistrict:H().required("city is required")}),A={name:"",email:"",state:"",locality:"",cityOrDistrict:""},f=Re({resolver:Me(M),defaultValues:A}),{handleSubmit:F,control:B,reset:d,formState:{errors:I}}=f;console.log(I);const K=r=>{N(r.target.value),I.contactNumber&&f.clearErrors("contactNumber"),o&&(u(r.target.value),a(r.target.value))};b.useEffect(()=>{var r,x,i;l.status==="success"&&m?(N(((r=l==null?void 0:l.data)==null?void 0:r.contactNumber)||""),u(((x=l==null?void 0:l.data)==null?void 0:x.abroadNumber)||""),a(((i=l==null?void 0:l.data)==null?void 0:i.nativeNumber)||""),console.log(l.data),T(l.data),d(l.data)):(N(""),u(""),a(""),k(null),d({name:""}))},[(l==null?void 0:l.status)==="success",d,m]);const E=r=>{var i;const x={...r,passportImage:P||((i=h==null?void 0:h.passportImage)==null?void 0:i.url),customerImage:S,contactNumber:Number(v),abroadNumber:Number(w),nativeNumber:Number(C)};m?y.mutate(x):t.mutate(x),console.log(x)},J=async r=>await Promise.all(r.map(async i=>{if(i.url.startsWith("blob:")){const L=await(await fetch(i.url)).blob();return new Promise((X,ne)=>{const $=new FileReader;$.onloadend=()=>{X({...i,url:$.result})},$.onerror=ne,$.readAsDataURL(L)})}return i})),_=async r=>{console.log("Updated Files:",r);const x=await J(r);console.log(x);const i=x.map(G=>G.url);k(i)};return e.jsx(te,{children:e.jsx(Te,{methods:f,onSubmit:F(E),children:e.jsxs(Le,{children:[e.jsx(j,{layout:[12,6],children:e.jsx(Ae,{cloudinaryLink:m&&(h==null?void 0:h.customerImage),label:"Customer Image",isEdit:m,accept:"image/*, application/pdf",name:"customerImage",onChange:r=>{console.log(r);const x=r;console.log(x);const i=new FileReader;console.log(i),i.readAsDataURL(x),i.onloadend=()=>{console.log(i),p(i.result)}}})}),e.jsxs(j,{layout:[12,6],children:[e.jsx("div",{style:{marginBottom:"1.3rem"},children:e.jsx(Z,{name:"name",label:"Name"})}),e.jsx("div",{children:e.jsx(Z,{name:"email",label:"Email"})})]}),e.jsxs(j,{layout:[12,12],children:[e.jsx(ee,{type:"number",fullWidth:!0,name:"contactNumber",label:"Additional Contact Number",value:v,onChange:K})," "]}),e.jsx(j,{layout:[12],children:e.jsx(Pe,{control:e.jsx(le,{checked:o,onChange:q}),label:"Copy Contact number to Abroad Number and Native number fields"})}),e.jsx(j,{layout:[12,6],children:e.jsx(ee,{fullWidth:!0,type:"number",name:"abroadNumber",label:"Abroad Number",value:w,onChange:r=>u(r.target.value)})}),e.jsx(j,{layout:[12,6],children:e.jsx(ee,{fullWidth:!0,type:"number",name:"nativeNumber",label:"Native Number",value:C,onChange:r=>a(r.target.value)})}),e.jsx(j,{layout:[12,6],children:e.jsx(qe,{label:"State",name:"state",control:B,errors:I,menuItems:U})}),e.jsx(j,{layout:[12,6],children:e.jsx(Z,{name:"locality",label:"locality/town"})}),e.jsx(j,{layout:[12,6],children:e.jsx(Z,{name:"cityOrDistrict",label:"City/district"})}),e.jsx(j,{layout:[12,6]}),e.jsxs(j,{layout:[12,6],children:[e.jsx(We,{id:"demo-simple-select-label",children:"Passport Image"}),e.jsx(Fe,{label:"Upload Files",name:"upload",isEdit:!m,cloudinaryLink:m&&(h==null?void 0:h.passportImage),onChange:_,errors:I})]}),e.jsx(Be,{disabled:t.isPending||y.isPending,name:t.isPending||y.isPending?"Loading":`${m?"Update":"Create"} Customer`})," "]})})})}export{Ue as C,Oe as U};
